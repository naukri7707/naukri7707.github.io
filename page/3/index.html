<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <title>Naukri&#39;s Blog</title>
  
  <!-- JQuery -->
  <script src="/lib/jquery.min.js"></script>
  <!-- Font Awesome -->
  <script src="/lib/fontawesome/all.min.js"></script>
  <!-- Title & Icon -->
  
  <link rel="icon" href="/img/favicon.ico">
  
  
  <!-- Google Analytics -->
  <meta name="google-site-verification" content="Xl6ILac3vA_Uk3OURVO1Qsm6arpq-14A7nyzaYwFhR4">
  
  <!-- MyStyle -->
  <link rel="stylesheet" href="/css/style.css">
  <!-- LayoutBehavior -->
  <script src="/js/layoutBehavior.js"></script>
  <!-- PostBehavior -->
  <script src="/js/postBehavior.js"></script>
</head>

<body id="layout">
  
  <!-- 背景 -->
  
  <img id="layout-background" src="/img/winxp.jpg" onmousedown="return false;" alt="background">
  
  <nav id="navbar" class="banner-style">
  <div class="navbar-list wrapper">
    <div class="nav-item-avatar">
      <img src="/img/gitcat.png" alt="avatar" onmousedown="return false;">
    </div>
    <div class="nav-item-links-left">
      
<ul class="links">
  
  <li class="item">
    
    <a class="item-link" href="/">
      首頁
    </a>
    
  </li>
  
  <li class="item">
    
    <a class="item-link" href="/archives">
      歸檔
    </a>
    
  </li>
  
</ul>
    </div>
    <div class="nav-item-links-right">
      
<ul class="links">
  
  <li class="item">
    
    <a href="https://zerojudge.tw/UserStatistic?id=47443" title="ZeroJudge">
      <i class="item-link fas fa-code"></i>
    </a>
    
  </li>
  
  <li class="item">
    
    <a href="https://github.com/naukri7707" title="Github">
      <i class="item-link fab fa-github"></i>
    </a>
    
  </li>
  
</ul>
    </div>
  </div>
</nav>
  <div id="messageField">
    <p>Test Message</p>
  </div>
  <header id="header">
  <img class="banner-img" src="/img/banner.png" onmousedown="return false" alt="headerImage">
  <div class="banner-inner">
    <div class="banner-title">
    Naukri&#39;s Blog
    </div>
  </div>
</header>
  <div class="wrapper main-body">
    <main id="main">
      
<article id="e345: Add Digits - 面試題" class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            e345: Add Digits - 面試題
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/e345/">
        <h1 class="title-text" title="e345: Add Digits - 面試題">e345: Add Digits - 面試題</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>給一個正整數 n，將所有位數相加總和，如果總和不是個位數，重複相加步驟直到總和為個位數。</p>
<p>e.g. 345 =&gt; 3 + 4 + 5 = 12，12 =&gt; 1 + 2 = 3</p>
<p>疑？？怎麼覺得好像很眼熟？？好像寫過？？</p>
<p>那你知道如何不用 Loop/Recursion 來算出解答嗎？</p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>每一行有一個數字 n，0 &lt;= n &lt;= 2147483647</p>
<p>EOF 結束</p>
<blockquote>
<p>0<br>123<br>456</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>輸出該數字對應到的解答</p>
<blockquote>
<p>0<br>6<br>6</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p>數學題，題目說不用迴圈或遞迴也能解代表有一定的規律，所以先列出前面幾項</p>
<table>
<thead>
<tr>
<th>數</th>
<th>相加和 1</th>
<th>相加和 2</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
<td>N/A</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>N/A</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>N/A</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
<td>N/A</td>
</tr>
<tr>
<td>4</td>
<td>4</td>
<td>N/A</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
<td>N/A</td>
</tr>
<tr>
<td>6</td>
<td>6</td>
<td>N/A</td>
</tr>
<tr>
<td>7</td>
<td>7</td>
<td>N/A</td>
</tr>
<tr>
<td>8</td>
<td>8</td>
<td>N/A</td>
</tr>
<tr>
<td>9</td>
<td>9</td>
<td>N/A</td>
</tr>
<tr>
<td>10</td>
<td>1</td>
<td>N/A</td>
</tr>
<tr>
<td>11</td>
<td>2</td>
<td>N/A</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td>16</td>
<td>7</td>
<td>N/A</td>
</tr>
<tr>
<td>17</td>
<td>8</td>
<td>N/A</td>
</tr>
<tr>
<td>18</td>
<td>9</td>
<td>N/A</td>
</tr>
<tr>
<td>19</td>
<td>10</td>
<td>1</td>
</tr>
<tr>
<td>20</td>
<td>2</td>
<td>N/A</td>
</tr>
<tr>
<td>21</td>
<td>3</td>
<td>N/A</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td>26</td>
<td>8</td>
<td>N/A</td>
</tr>
<tr>
<td>27</td>
<td>9</td>
<td>N/A</td>
</tr>
<tr>
<td>28</td>
<td>10</td>
<td>1</td>
</tr>
<tr>
<td>29</td>
<td>11</td>
<td>2</td>
</tr>
<tr>
<td>30</td>
<td>3</td>
<td>N/A</td>
</tr>
</tbody></table>
<p>然後就會由於相加和超過 9 時，會再觸發一次相加直到和變成個位數，而這個動作會讓數的最終合保持在 “1~9” 9 個數字做循環，所以可以用和 9 取餘來表示其規律。</p>
<p>但因為 9 和 9 取餘是 0 ，而題目要求的是 9，所以先將原數減去一取餘完再加回來變成</p>
<blockquote>
<p>ans = (n-1) % 9 + 1</p>
</blockquote>
<p>來處理數字為 9 的倍數時的例外情況，但這時候又產生另一個問題，當 n 為 0 時會變成 -1 和 9 取餘，所以在取餘前先判斷是否為 0 變成</p>
<blockquote>
<p>ans = n != 0 ? (n - 1) % 9 + 1 : 0</p>
</blockquote>
<p>然後每次都按公式輸出答案即可，另外在 C 中 -1 % 9 得到的解會是 -1，再加上 1 之後剛好會變回 0，所以不做判斷也可以，只是感覺不太好。</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-2ms-104KB"><a href="#AC-2ms-104KB" class="headerlink" title="AC (2ms, 104KB)"></a>AC (2ms, 104KB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">" %d"</span>, &amp;n) == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, n ? (n - <span class="number">1</span>) % <span class="number">9</span> + <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>

<article id="e343: BMI 計算" class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            e343: BMI 計算
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/e343/">
        <h1 class="title-text" title="e343: BMI 計算">e343: BMI 計算</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>「身體質量指數」這個概念，是由 19 世紀中期的比利時統計學家及數學家凱特勒（Lambert Adolphe Jacques Quetelet）最先提出。它的定義如下：</p>
<p><img src="https://zerojudge.tw/ShowImage?id=1340" alt="img1"></p>
<p>w = 體重，單位：公斤;<br>h = 身高，單位：公尺;<br>BMI = 身高體重指數，單位：公斤/平方公尺</p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>輸入第一行含有一個整數 w，代表體重，單位公斤。第二行含有一個整數 h，代表身高，單位公分。</p>
<blockquote>
<p>72<br>178</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>輸出 bmi 值，四捨五入到小數點以下一位數。</p>
<blockquote>
<p>22.7</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p>簡單的四則運算，因為計算 BMI 時用的是公尺，但輸入的是公分，所以體重要先乘上 10000 再去和輸入的身高相除。</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-2ms-108KB"><a href="#AC-2ms-108KB" class="headerlink" title="AC (2ms, 108KB)"></a>AC (2ms, 108KB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> w, h;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">" %lf %lf"</span>, &amp;w, &amp;h);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.1lf"</span>, (w * <span class="number">10000</span>) / (h * h));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>

<article id="e340: 差分練習" class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            e340: 差分練習
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/e340/">
        <h1 class="title-text" title="e340: 差分練習">e340: 差分練習</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>給定一陣列 B，請輸出這個陣列的差分陣列 A。</p>
<p>定義 1 : 當 B[i]為 A[0]+A[1]+…A[i]，B 陣列為 A 陣列的前綴和。</p>
<p>定義 2 : 當 B 陣列為 A 陣列的前綴和，A 陣列為 B 陣列的差分陣列。</p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>輸入的第一行有一個整數 N (1 &lt;= N &lt;= 200000)，代表 B 陣列大小。</p>
<p>第二行有 N 個整數以空白分隔，依序表示 B[0], B[1], B[2] … B[N-1]。</p>
<p>陣列中數字的絕對值不會超過 10^9。</p>
<blockquote>
<p>5<br>1 2 3 4 5</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>輸出一行，其中有 N 個整數以空白分隔，依序表示 A[0], A[1], A[2] … A[N-1]。</p>
<blockquote>
<p>1 1 1 1 1</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p>和<a href="/線上解題/ZeroJudge/e339">上一題</a>差不多，改成用一個整數紀錄上一個元素，輸出當前元素減去上一個元素即可。</p>
<p>一樣不用做 IO 優化也能過。</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-23ms-1-1MB"><a href="#AC-23ms-1-1MB" class="headerlink" title="AC (23ms, 1.1MB)"></a>AC (23ms, 1.1MB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFSIZ 1048576</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readChar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">char</span> buffer[BUFSIZ], * now = buffer + BUFSIZ, * end = buffer + BUFSIZ;</span><br><span class="line">    <span class="keyword">if</span> (now == end)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (end &lt; buffer + BUFSIZ)</span><br><span class="line">            <span class="keyword">return</span> EOF;</span><br><span class="line">        end = (buffer + fread(buffer, <span class="number">1</span>, BUFSIZ, <span class="built_in">stdin</span>));</span><br><span class="line">        now = buffer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *now++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readInt</span><span class="params">(<span class="keyword">int</span>* dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &lt; <span class="string">'-'</span>)</span><br><span class="line">        <span class="keyword">if</span> (ch == EOF) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">'-'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        *dst = readChar() ^ <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">while</span> ((ch = readChar()) &gt;= <span class="string">'0'</span>)</span><br><span class="line">            * dst = (*dst &lt;&lt; <span class="number">3</span>) + (*dst &lt;&lt; <span class="number">1</span>) + (ch ^ <span class="string">'0'</span>);</span><br><span class="line">        *dst = ~*dst + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        *dst = ch ^ <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">while</span> ((ch = readChar()) &gt;= <span class="string">'0'</span>)</span><br><span class="line">            * dst = (*dst &lt;&lt; <span class="number">3</span>) + (*dst &lt;&lt; <span class="number">1</span>) + (ch ^ <span class="string">'0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">putInt</span><span class="params">(<span class="keyword">register</span> <span class="keyword">int</span> src, <span class="keyword">const</span> <span class="keyword">char</span> suffix)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> div;</span><br><span class="line">    <span class="keyword">char</span> buffer[<span class="number">13</span>], * st = buffer + <span class="number">11</span>;</span><br><span class="line">    *st = suffix, * (st + <span class="number">1</span>) = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (src &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        src = ~src + <span class="number">1</span>;</span><br><span class="line">        *(--st) = src - ((div = src / <span class="number">10</span>) &lt;&lt; <span class="number">3</span>) - (div &lt;&lt; <span class="number">1</span>) + <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">while</span> (src = div)</span><br><span class="line">            * (--st) = src - ((div = src / <span class="number">10</span>) &lt;&lt; <span class="number">3</span>) - (div &lt;&lt; <span class="number">1</span>) + <span class="string">'0'</span>;</span><br><span class="line">        *(--st) = <span class="string">'-'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            *(--st) = src - ((div = src / <span class="number">10</span>) &lt;&lt; <span class="number">3</span>) - (div &lt;&lt; <span class="number">1</span>) + <span class="string">'0'</span>;</span><br><span class="line">        &#125; <span class="keyword">while</span> (src = div);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fputs</span>(st, <span class="built_in">stdout</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">int</span> prev = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> tmp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%*lld"</span>);</span><br><span class="line">    <span class="keyword">while</span> (readInt(&amp;tmp))</span><br><span class="line">        putInt((tmp - prev), <span class="string">' '</span>), prev = tmp;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>

<article id="e339: 前綴和練習" class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            e339: 前綴和練習
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/e339/">
        <h1 class="title-text" title="e339: 前綴和練習">e339: 前綴和練習</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>給定一陣列 A，請輸出這個陣列的前綴和陣列 B。</p>
<p>定義 : 當 B[i]為 A[0]+A[1]+…A[i]，B 陣列為 A 陣列的前綴和。</p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>輸入的第一行有一個整數 N (1 &lt;= N &lt;= 200000)，代表 A 陣列大小。</p>
<p>第二行有 N 個整數以空白分隔，依序表示 A[0], A[1], A[2] … A[N-1]。</p>
<p>陣列中數字的絕對值不會超過 10^9。</p>
<blockquote>
<p>5<br>1 2 3 4 5</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>輸出一行，其中有 N 個整數以空白分隔，依序表示 B[0], B[1], B[2] … B[N-1]。</p>
<blockquote>
<p>1 3 6 10 15</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p>就是將自己和前面的所有項目加起來，所以用一個整數去累加，然後不斷輸出該整數即可。</p>
<p>注意！累加的總數可能是負值也會超過 int 上限，要使用 long long。</p>
<p>本題不做 IO 優化也能過。</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-21ms-1-1MB"><a href="#AC-21ms-1-1MB" class="headerlink" title="AC (21ms, 1.1MB)"></a>AC (21ms, 1.1MB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFSIZ 1048576</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readChar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">char</span> buffer[BUFSIZ], * now = buffer + BUFSIZ, * end = buffer + BUFSIZ;</span><br><span class="line">    <span class="keyword">if</span> (now == end)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (end &lt; buffer + BUFSIZ)</span><br><span class="line">            <span class="keyword">return</span> EOF;</span><br><span class="line">        end = (buffer + fread(buffer, <span class="number">1</span>, BUFSIZ, <span class="built_in">stdin</span>));</span><br><span class="line">        now = buffer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *now++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readLongLong</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>* dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &lt; <span class="string">'-'</span>)</span><br><span class="line">        <span class="keyword">if</span> (ch == EOF) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">'-'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        *dst = readChar() ^ <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">while</span> ((ch = readChar()) &gt;= <span class="string">'0'</span>)</span><br><span class="line">            * dst = (*dst &lt;&lt; <span class="number">3</span>) + (*dst &lt;&lt; <span class="number">1</span>) + (ch ^ <span class="string">'0'</span>);</span><br><span class="line">        *dst = ~*dst + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        *dst = ch ^ <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">while</span> ((ch = readChar()) &gt;= <span class="string">'0'</span>)</span><br><span class="line">            * dst = (*dst &lt;&lt; <span class="number">3</span>) + (*dst &lt;&lt; <span class="number">1</span>) + (ch ^ <span class="string">'0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">putLongLong</span><span class="params">(<span class="keyword">register</span> <span class="keyword">long</span> <span class="keyword">long</span> src, <span class="keyword">const</span> <span class="keyword">char</span> suffix)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> div;</span><br><span class="line">    <span class="keyword">char</span> buffer[<span class="number">22</span>], * st = buffer + <span class="number">20</span>;</span><br><span class="line">    *st = suffix, * (st + <span class="number">1</span>) = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (src &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        src = ~src + <span class="number">1</span>;</span><br><span class="line">        *(--st) = src - ((div = src / <span class="number">10</span>) &lt;&lt; <span class="number">3</span>) - (div &lt;&lt; <span class="number">1</span>) + <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">while</span> (src = div)</span><br><span class="line">            * (--st) = src - ((div = src / <span class="number">10</span>) &lt;&lt; <span class="number">3</span>) - (div &lt;&lt; <span class="number">1</span>) + <span class="string">'0'</span>;</span><br><span class="line">        *(--st) = <span class="string">'-'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            *(--st) = src - ((div = src / <span class="number">10</span>) &lt;&lt; <span class="number">3</span>) - (div &lt;&lt; <span class="number">1</span>) + <span class="string">'0'</span>;</span><br><span class="line">        &#125; <span class="keyword">while</span> (src = div);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fputs</span>(st, <span class="built_in">stdout</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">long</span> <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> tmp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%*lld"</span>);</span><br><span class="line">    <span class="keyword">while</span> (readLongLong(&amp;tmp))</span><br><span class="line">        putLongLong((sum += tmp), <span class="string">' '</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>

<article id="e338: 放暑假了!!!!!...可惜要上暑輔...開學後還要模考..." class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            e338: 放暑假了!!!!!...可惜要上暑輔...開學後還要模考...
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/e338/">
        <h1 class="title-text" title="e338: 放暑假了!!!!!...可惜要上暑輔...開學後還要模考...">e338: 放暑假了!!!!!...可惜要上暑輔...開學後還要模考...</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <i class="fas fa-tags"></i>
        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO優化/">IO優化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/建表/">建表</a></li></ul>
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>段考後的延平:</p>
<p><a href="https://drive.google.com/file/d/1j4qESZGdI0jQW6uuxcSb7tfNsq_SB_vl/view?usp=sharing" target="_blank" rel="noopener">https://drive.google.com/file/d/1j4qESZGdI0jQW6uuxcSb7tfNsq_SB_vl/view?usp=sharing</a></p>
<p>XD</p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>一行一個非負整數 n(n&lt;2^31)</p>
<blockquote>
<p>1<br>2<br>3<br>4</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>輸出此整數在二進位中 1 的個數</p>
<blockquote>
<p>1<br>1<br>2<br>1</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p>算出一個整數的二進制中有幾個 1 位元，直覺反應用用右移(&quot;&gt;&gt;&quot;)和位元 AND (&#39;&amp;&#39;) 配合迴圈檢查每個位元，時間複雜度 O(n)</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">popCount</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        res += n &amp; <span class="number">1</span>;</span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但這樣子還不夠快，所以改用建表 + 查表 O(1) 的方法。</p>
<p>作法很簡單，把每兩位元當作一組那每組就有</p>
<blockquote>
<p>00, 01, 10, 11</p>
</blockquote>
<p>四種狀態，1 出現的次數分別是</p>
<blockquote>
<p>0 1 1 2</p>
</blockquote>
<p>而當有兩組時變成</p>
<blockquote>
<p>0000, 0001, 0010, 0011, 0100, 0101, 0110, 0111,<br>1000, 1001, 1010, 1011, 1100, 1101, 1110, 1111</p>
</blockquote>
<p>4 * 4 = 16 種狀態，而 1 出現的次數剛好能將他拆成左邊一組右邊一組，然後左右兩組相加，變成</p>
<blockquote>
<p>(0 + 0), (0 + 1), (0 + 1), (0 + 2), (1 + 0), (1 + 1), (1 + 1), (1 + 2),<br>(1 + 0), (1 + 1), (1 + 1), (1 + 2), (2 + 0), (2 + 1), (2 + 1), (2 + 2)</p>
</blockquote>
<p>之後 6 位, 8 位 … 32 位皆可用同理求得，而由於過程是簡單遞迴，所以可以用巨集來建表減少程式的運算消耗 (如下方程式碼)，最後查表輸出，但由於 2<sup>32</sup> 太大了，所以表只建到 2<sup>16</sup> 然後用右移(&quot;&gt;&gt;&quot;)和位元 AND (&#39;&amp;&#39;) 來拆成前 16 位和後 16 位再相加求得 1 的總數輸出。</p>
<p>輸入輸出量極大，要做 IO 優化。</p>
<p>–</p>
<p>題外話: 本題出題者應該是想要用時間卡開頭 O(n) 的算法，但本來 O(n) 就沒多慢，所以連帶著用 O(1) 算法但 IO 優化不夠好的人一起被卡掉了，結果就產生了討論區精彩的筆戰，然後不知道是不是因為太精采的關係，每次 Loading 進這題都要讀很久…</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-0-2s-2-1MB"><a href="#AC-0-2s-2-1MB" class="headerlink" title="AC (0.2s, 2.1MB)"></a>AC (0.2s, 2.1MB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 65535</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFSIZ 1048576</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFMAX 1048560</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  BIT2(n)       n,         n+1,       n+1,        n+2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  BIT4(n)  BIT2(n),  BIT2(n+1),  BIT2(n+1),  BIT2(n+2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  BIT6(n)  BIT4(n),  BIT4(n+1),  BIT4(n+1),  BIT4(n+2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  BIT8(n)  BIT6(n),  BIT6(n+1),  BIT6(n+1),  BIT6(n+2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BIT10(n)  BIT8(n),  BIT8(n+1),  BIT8(n+1),  BIT8(n+2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BIT12(n) BIT10(n), BIT10(n+1), BIT10(n+1), BIT10(n+2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BIT14(n) BIT12(n), BIT12(n+1), BIT12(n+1), BIT12(n+2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BIT16(n) BIT14(n), BIT14(n+1), BIT14(n+1), BIT14(n+2)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> TABLE[MAX + <span class="number">1</span>] = &#123; BIT16(<span class="number">0</span>) &#125;;</span><br><span class="line"><span class="keyword">char</span> output[BUFSIZ];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readChar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">char</span> buffer[BUFSIZ], * now = buffer + BUFSIZ, * end = buffer + BUFSIZ;</span><br><span class="line">    <span class="keyword">if</span> (now == end)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (end &lt; buffer + BUFSIZ)</span><br><span class="line">            <span class="keyword">return</span> EOF;</span><br><span class="line">        end = (buffer + fread(buffer, <span class="number">1</span>, BUFSIZ, <span class="built_in">stdin</span>));</span><br><span class="line">        now = buffer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *now++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readUInt</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span>* dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &lt; <span class="string">'0'</span>)</span><br><span class="line">        <span class="keyword">if</span> (ch == EOF) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    *dst = ch ^ <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &gt;= <span class="string">'0'</span>)</span><br><span class="line">        * dst = (*dst &lt;&lt; <span class="number">3</span>) + (*dst &lt;&lt; <span class="number">1</span>) + (ch ^ <span class="string">'0'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span>* <span class="title">setUInt</span><span class="params">(<span class="keyword">char</span> buffer[], <span class="keyword">register</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> src, <span class="keyword">const</span> <span class="keyword">char</span> suffix)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> div;</span><br><span class="line">    <span class="keyword">char</span> tmp[<span class="number">11</span>], * st = tmp + <span class="number">10</span>, *res = buffer - <span class="number">1</span>;</span><br><span class="line">    *st = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        *(--st) = src - ((div = src / <span class="number">10</span>) &lt;&lt; <span class="number">3</span>) - (div &lt;&lt; <span class="number">1</span>) + <span class="string">'0'</span>;</span><br><span class="line">    &#125; <span class="keyword">while</span> (src = div);</span><br><span class="line">    <span class="keyword">while</span> (*++res = *st++)</span><br><span class="line">        ;</span><br><span class="line">    <span class="keyword">if</span> (suffix)* res++ = suffix;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">char</span> *end = output + BUFMAX;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">char</span>* oTop = output;</span><br><span class="line">    <span class="keyword">while</span> (readUInt(&amp;n))</span><br><span class="line">    &#123;</span><br><span class="line">        oTop = setUInt(oTop, TABLE[n &amp; MAX] + TABLE[(n &gt;&gt; <span class="number">16</span>) &amp; MAX], <span class="string">'\n'</span>);</span><br><span class="line">        <span class="keyword">if</span> (oTop &gt; end)</span><br><span class="line">        &#123;</span><br><span class="line">            *oTop = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">fputs</span>(output, <span class="built_in">stdout</span>);</span><br><span class="line">            oTop = output;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    *oTop = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">fputs</span>(output, <span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>

<article id="e319: 小王的積木 Again!" class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            e319: 小王的積木 Again!
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/e319/">
        <h1 class="title-text" title="e319: 小王的積木 Again!">e319: 小王的積木 Again!</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <i class="fas fa-tags"></i>
        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO優化/">IO優化</a></li></ul>
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>給你一些數字</p>
<p>這些數字中只有一個只出現 1 次,其他數字則出現了 3 次</p>
<p>求這個只出現 1 次的數字</p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>第一行有一個整數 N(4&lt;=N&lt;4*10^6)</p>
<p>接下來有 N 個整數,每個整數皆在 int 範圍以內</p>
<blockquote>
<p>4<br>2 2 2 1</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>只出現 1 次的數字</p>
<blockquote>
<p>1</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p><a href="/線上解題/ZeroJudge/d708">d708</a> 的困難版，看不懂邏輯的可以先去看那題的題解。</p>
<p>位元操作，邏輯如下 (註解區的 t0 ~ t3 指的是所有位元的操作情況非整數)</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> (readUInt(&amp;t0))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// -- 3 --</span></span><br><span class="line">    <span class="comment">// 當之前的 t2 和現在的 t0 都出現 1 時，將 t1 設為 1，並把剛才進位至 3 的位元清 0 (因為計算過了)</span></span><br><span class="line">    <span class="comment">// t1 為 1 的位元在在下一個 loop 必定會被歸 0</span></span><br><span class="line">    <span class="comment">// (因為 t2 和 t0 為 0，t0 為 0 時這個 loop 就不可能讓 t2 變成 1，t2 在這個 loop 為 0 時，t1 在下個 loop 就不可能為 1)</span></span><br><span class="line">    t1 = t2 &amp; t0;</span><br><span class="line">    t2 &amp;= ~t1;</span><br><span class="line">    t0 &amp;= ~t1;</span><br><span class="line">    <span class="comment">// -- 2 --</span></span><br><span class="line">    <span class="comment">// 當之前的 t1 和現在的 t0 都出現 1 時</span></span><br><span class="line">    <span class="comment">// 將他們 t2 設為 1</span></span><br><span class="line">    t2 ^= t1 &amp; t0;</span><br><span class="line">    <span class="comment">// -- 1 --</span></span><br><span class="line">    <span class="comment">// 之前的 t1 或現在的 t0 出現 1 的位元為 1</span></span><br><span class="line">    <span class="comment">// 之前的 t1 且現在的 t0 出現的則歸 0 (上面已經進位置 t2 了)</span></span><br><span class="line">    <span class="comment">// 都沒有則繼續維持 0</span></span><br><span class="line">    t1 ^= t0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>輸入測資量極大，要做輸入優化，且優化時因記憶體限制 5MB 所以要注意 buffer 大小。</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-37ms-108KB"><a href="#AC-37ms-108KB" class="headerlink" title="AC (37ms, 108KB)"></a>AC (37ms, 108KB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFSIZ 8192</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readChar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">char</span> buffer[BUFSIZ], * t0 = buffer + BUFSIZ, * end = buffer + BUFSIZ;</span><br><span class="line">    <span class="keyword">if</span> (t0 == end)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (end &lt; buffer + BUFSIZ)</span><br><span class="line">            <span class="keyword">return</span> EOF;</span><br><span class="line">        end = (buffer + fread(buffer, <span class="number">1</span>, BUFSIZ, <span class="built_in">stdin</span>));</span><br><span class="line">        t0 = buffer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *t0++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readUInt</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span>* dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &lt; <span class="string">'0'</span>)</span><br><span class="line">        <span class="keyword">if</span> (ch == EOF) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    *dst = ch ^ <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &gt;= <span class="string">'0'</span>)</span><br><span class="line">        * dst = (*dst &lt;&lt; <span class="number">3</span>) + (*dst &lt;&lt; <span class="number">1</span>) + (ch ^ <span class="string">'0'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> t0, t1 = <span class="number">0</span>, t2 = <span class="number">0</span>, t3 = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">" %*d"</span>);</span><br><span class="line">    <span class="keyword">while</span> (readUInt(&amp;t0))</span><br><span class="line">    &#123;</span><br><span class="line">        t3 = t2 &amp; t0;</span><br><span class="line">        t2 &amp;= ~t3;</span><br><span class="line">        t0 &amp;= ~t3;</span><br><span class="line">        t2 ^= t1 &amp; t0;</span><br><span class="line">        t1 ^= t0;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, t1);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>

<article id="d708: 小王的積木" class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            d708: 小王的積木
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/d708/">
        <h1 class="title-text" title="d708: 小王的積木">d708: 小王的積木</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <i class="fas fa-tags"></i>
        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/位元運算/">位元運算</a></li></ul>
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>自從小涵去商店買了那麼多的積木，小王也去買了一大堆。<br>不過小王比較喜歡數學，所以他買的積木上寫的只有數字；因為他認為偶數比較吉利，於是他買的積木是全是偶數快的。<br>聽說小涵少了一個積木，他便整理了一下他的，可是他發現他也少了一塊積木…（很無語吧…）<br>上次他見你已經幫小涵找到了積木，於是就請你來幫他找找，而且他還告訴你：“我的積木比小涵的好找很多。”<br>半信半疑的你決定幫幫他。</p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>只有一筆測資。 測資末尾會有多餘信息，忽略就好。//感謝 asas 提醒。2015/8/6</p>
<p>輸入數據的第一行，是小王告訴你他的積木個數 N（N 一定是一個正偶數，而且 2&lt;=N&lt;=1000000，你看他的積木可沒有小涵的多）。<br>接下來每行有（N-1）個數字，表示小王每個積木上的數字（可以用 longint 存儲）。</p>
<blockquote>
<p>8<br>1<br>2<br>3<br>2<br>3<br>4<br>4</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>對於每組測資，輸出小王缺少的那塊積木的數字。</p>
<blockquote>
<p>1</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p><a href="/線上解題/ZeroJudge/e319">e319</a> 的簡易版。</p>
<p>利用兩相同數經 XOR 運算後因為偶一為零會變成 0 的特性，將一個整數 0 和每個數字都 XOR 一遍，最後的值就會是只出現一次的那個 (出現偶數次的都互相抵銷掉了)</p>
<p>本題不用做輸入優化也能輕鬆過。</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-10ms-1-1MB"><a href="#AC-10ms-1-1MB" class="headerlink" title="AC (10ms, 1.1MB)"></a>AC (10ms, 1.1MB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFSIZ 1048576</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readChar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">char</span> buffer[BUFSIZ], * t0 = buffer + BUFSIZ, * end = buffer + BUFSIZ;</span><br><span class="line">    <span class="keyword">if</span> (t0 == end)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (end &lt; buffer + BUFSIZ)</span><br><span class="line">            <span class="keyword">return</span> EOF;</span><br><span class="line">        end = (buffer + fread(buffer, <span class="number">1</span>, BUFSIZ, <span class="built_in">stdin</span>));</span><br><span class="line">        t0 = buffer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *t0++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readUInt</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span>* dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &lt; <span class="string">'0'</span>)</span><br><span class="line">        <span class="keyword">if</span> (ch == EOF) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    *dst = ch ^ <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &gt;= <span class="string">'0'</span>)</span><br><span class="line">        * dst = (*dst &lt;&lt; <span class="number">3</span>) + (*dst &lt;&lt; <span class="number">1</span>) + (ch ^ <span class="string">'0'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> n, ans = <span class="number">0</span>, tmp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">" %d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span> (--n)</span><br><span class="line">    &#123;</span><br><span class="line">        readUInt(&amp;tmp);</span><br><span class="line">        ans ^= tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>

<article id="e307: 請讓我留在你的回憶裡" class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            e307: 請讓我留在你的回憶裡
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/e307/">
        <h1 class="title-text" title="e307: 請讓我留在你的回憶裡">e307: 請讓我留在你的回憶裡</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <i class="fas fa-tags"></i>
        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO優化/">IO優化</a></li></ul>
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>背景介紹，不是很重要<a href="https://zerojudge.tw/ShowProblem?problemid=e307" target="_blank" rel="noopener">見原題</a></p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>幸(サチ/Sachi)失去記憶了,頭腦一片空白</p>
<p>請你幫她移除記憶中的空白,找回她的記憶吧</p>
<p>輸入只有一行,含有一個字串 s (|s|&lt;=108)</p>
<p>s 含有所有可印出的字元(包含空白),請你移除其中的空白</p>
<p>移除方式如下:</p>
<p>若連續的空白數為偶數,則全部移除</p>
<p>若為奇數,則移除到只剩下一個空白</p>
<blockquote>
<p>&nbsp;&nbsp;M&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;&nbsp;am&nbsp;&nbsp;&nbsp;&nbsp;e&nbsp;&nbsp;&nbsp;i&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;&nbsp;&nbsp;&nbsp;.</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>移除空白後剩下的字元</p>
<blockquote>
<p>My name is Sachi.</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p>簡單的字串處理，重點在 IO 優化。</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-0-1s-2-1MB"><a href="#AC-0-1s-2-1MB" class="headerlink" title="AC (0.1s, 2.1MB)"></a>AC (0.1s, 2.1MB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFSIZ 1048576</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFMAX 1048000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> output[BUFSIZ];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readChar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">char</span> buffer[BUFSIZ], * now = buffer + BUFSIZ, * end = buffer + BUFSIZ;</span><br><span class="line">    <span class="keyword">if</span> (now == end)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (end &lt; buffer + BUFSIZ)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        end = (buffer + fread(buffer, <span class="number">1</span>, BUFSIZ, <span class="built_in">stdin</span>));</span><br><span class="line">        now = buffer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *now++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">char</span> tmp, * oTop = output, isOdd = <span class="number">0</span>, *max = output + BUFMAX;</span><br><span class="line">    <span class="keyword">while</span> (tmp = readChar())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (tmp == <span class="string">' '</span>)</span><br><span class="line">            isOdd = ~isOdd;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (isOdd)</span><br><span class="line">                * oTop++ = <span class="string">' '</span>, isOdd = <span class="number">0</span>;</span><br><span class="line">            *oTop++ = tmp;</span><br><span class="line">            <span class="keyword">if</span> (oTop &gt; max)</span><br><span class="line">            &#123;</span><br><span class="line">                *oTop = <span class="string">'\0'</span>;</span><br><span class="line">                <span class="built_in">fputs</span>(output, <span class="built_in">stdout</span>);</span><br><span class="line">                oTop = output;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    *oTop = <span class="string">'\0'</span>;</span><br><span class="line">    <span class="built_in">fputs</span>(output, <span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>

<article id="e305: Xor 運算" class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            e305: Xor 運算
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/e305/">
        <h1 class="title-text" title="e305: Xor 運算">e305: Xor 運算</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <i class="fas fa-tags"></i>
        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/位元運算/">位元運算</a></li></ul>
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>有一個函式如下</p>
<p>C/C++:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">sumxor</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((N ^ i) == (N + i))ans++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sumxor</span><span class="params">(N)</span> :</span></span><br><span class="line">    ans = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N) :</span><br><span class="line">        <span class="keyword">if</span> ((N ^ i) == (N + i)) :</span><br><span class="line">            ans += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>

<p>Java:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">sumxor</span><span class="params">(<span class="keyword">long</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((N ^ i) == (N + i)) ans++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Pascal:</p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span></span><br><span class="line">    i, N: int64;</span><br><span class="line">    ans : int64 = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumxor</span><span class="params">(N: int64)</span>:</span>int64;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    ans:=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span> <span class="keyword">to</span> N <span class="keyword">do</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> ((N xor i) = (N + i)) <span class="keyword">then</span> ans:=ans+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (N=<span class="number">0</span>) ans:=<span class="number">0</span>;</span><br><span class="line">        sumxor:=ans;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>因為要處理的 N 很大,現在請你優化這個函式</p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>多筆測資</p>
<p>一行有一個整數 N(N&lt;10<sup>15</sup>)</p>
<blockquote>
<p>4<br>10</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>輸出函式的回傳值</p>
<blockquote>
<p>4<br>4</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p>a ^ b 和 a + b 相等的情況只有在轉換成二進制後位元 1 不重疊的情況 (如下)</p>
<blockquote>
<p>48 + 1 = (11000) + (00001)，此時不論用 XOR 或 + 都會變成 (11001)</p>
</blockquote>
<p>而由於有多個 0 ， 所以要算出所有組合數 : 2<sup>最大位元 1 後面 0 的數量</sup> 舉例來說，上面的 48 最大位元 1 為 (‘1’1000)，後面共有 3 個 0 ，所以就是 2<sup>3</sup> = 8，而因為是 2 的乘冪，所以可以用位元運算加速，如底部程式碼。</p>
<p>雖然 0 符合以上邏輯，但因為 0 沒有辦法進行位元操作所以要做特殊處理。</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-6ms-104KB"><a href="#AC-6ms-104KB" class="headerlink" title="AC (6ms, 104KB)"></a>AC (6ms, 104KB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> n, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">" %llu"</span>, &amp;n) == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (n)</span><br><span class="line">        &#123;</span><br><span class="line">            ans = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">do</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (!(n &amp; <span class="number">1</span>))</span><br><span class="line">                    ans &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">while</span> (n &gt;&gt;= <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%llu\n"</span>, ans);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"0"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>

<article id="e295: 基本題-小崴的IO優化挑戰" class="post">
  <div class="post-meta">
    <ul class="meta-list">
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/" title="線上解題 (251)">
          <div class="meta-list-link-text">
            線上解題
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link" href="/categories/線上解題/ZeroJudge/" title="ZeroJudge (250)">
          <div class="meta-list-link-text">
            ZeroJudge
          </div>
        </a>
      </li>
      
      <li class="meta-list-item">
        <a class="meta-list-link current-link">
          <div class="meta-list-link-text">
            e295: 基本題-小崴的IO優化挑戰
          </div>
        </a>
      </li>
    </ul>
  </div>
  <div class="post-inner">
    <header class="title">
      
      <a class="title-link" href="/線上解題/ZeroJudge/e295/">
        <h1 class="title-text" title="e295: 基本題-小崴的IO優化挑戰">e295: 基本題-小崴的IO優化挑戰</h1>
      </a>
      
      <div class="separator"></div>
      <div class="info">
        
        <i class="fas fa-tags"></i>
        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO優化/">IO優化</a></li></ul>
        
        <time class="time">
          <i class="far fa-calendar-alt"></i>
          2019-09-05
        </time>
      </div>
    </header>
    
    <div class="content  toc-article">
      <h2 id="內容"><a href="#內容" class="headerlink" title="內容"></a>內容</h2><p>小崴的 IO 優化挑戰!!!<br>把輸入的很多組數字加起來再輸出!!</p>
<p>數字幾個沒限制!!!</p>
<p>加油!!! 小心 TLE!!</p>
<hr>
<h2 id="輸入"><a href="#輸入" class="headerlink" title="輸入"></a>輸入</h2><p>每一行兩個 unsigned int a &amp; b</p>
<p>EOF 結尾</p>
<blockquote>
<p>1 2<br>3 4<br>5 6<br>7 8</p>
</blockquote>
<h2 id="輸出"><a href="#輸出" class="headerlink" title="輸出"></a>輸出</h2><p>每一行再輸出一個 unsigned int c=a+b</p>
<blockquote>
<p>3<br>7<br>11<br>15</p>
</blockquote>
<hr>
<h2 id="解題思路"><a href="#解題思路" class="headerlink" title="解題思路"></a>解題思路</h2><p>如題，簡單的加法和 IO 優化。</p>
      <div class="hidden-content">
        <hr>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><h6 id="AC-22ms-2-1MB"><a href="#AC-22ms-2-1MB" class="headerlink" title="AC (22ms, 2.1MB)"></a>AC (22ms, 2.1MB)</h6><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFSIZ 1048576</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFMAX 1048570</span></span><br><span class="line"><span class="keyword">char</span> output[BUFSIZ];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readChar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">char</span> buffer[BUFSIZ], * now = buffer + BUFSIZ, * end = buffer + BUFSIZ;</span><br><span class="line">    <span class="keyword">if</span> (now == end)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (end &lt; buffer + BUFSIZ)</span><br><span class="line">            <span class="keyword">return</span> EOF;</span><br><span class="line">        end = (buffer + fread(buffer, <span class="number">1</span>, BUFSIZ, <span class="built_in">stdin</span>));</span><br><span class="line">        now = buffer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *now++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">readUInt</span><span class="params">(<span class="keyword">register</span> <span class="keyword">unsigned</span> <span class="keyword">int</span>* dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &lt; <span class="string">'0'</span>)</span><br><span class="line">        <span class="keyword">if</span> (ch == EOF) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    *dst = ch ^ <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">while</span> ((ch = readChar()) &gt;= <span class="string">'0'</span>)</span><br><span class="line">        * dst = (*dst &lt;&lt; <span class="number">3</span>) + (*dst &lt;&lt; <span class="number">1</span>) + (ch ^ <span class="string">'0'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span>* <span class="title">setUInt</span><span class="params">(<span class="keyword">char</span> buffer[], <span class="keyword">register</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> src, <span class="keyword">const</span> <span class="keyword">char</span> suffix)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> div;</span><br><span class="line">    <span class="keyword">char</span> tmp[<span class="number">11</span>], * st = tmp + <span class="number">10</span>, *res = buffer - <span class="number">1</span>;</span><br><span class="line">    *st = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        *(--st) = (src - ((div = src / <span class="number">10</span>) &lt;&lt; <span class="number">3</span>) - (div &lt;&lt; <span class="number">1</span>)) | <span class="string">'0'</span>;</span><br><span class="line">    &#125; <span class="keyword">while</span> (src = div);</span><br><span class="line">    <span class="keyword">while</span> (*++res = *st++)</span><br><span class="line">        ;</span><br><span class="line">    <span class="keyword">if</span> (suffix)* res++ = suffix;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">char</span>* oTop = output;</span><br><span class="line">    <span class="keyword">char</span>* end = output + BUFMAX;</span><br><span class="line">    <span class="keyword">while</span> (readUInt(&amp;n), readUInt(&amp;m))</span><br><span class="line">    &#123;</span><br><span class="line">        oTop = setUInt(oTop, n + m, <span class="string">'\n'</span>);</span><br><span class="line">        <span class="keyword">if</span> (oTop &gt; end)</span><br><span class="line">        &#123;</span><br><span class="line">            *oTop = <span class="string">'\0'</span>;</span><br><span class="line">            <span class="built_in">puts</span>(output);</span><br><span class="line">            oTop = output;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    *oTop = <span class="string">'\0'</span>;</span><br><span class="line">    <span class="built_in">puts</span>(output);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      </div>
    </div>
    <div class="more">
      <a class="more-button" onclick="readMore()">閱讀更多</a>
    </div>
    
  </div>
</article>


<div class="index-pagination">
  <a class="extend prev" rel="prev" href="/page/2/">&laquo;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/4/">&raquo;</a>
</div>

    </main>
    <aside id="sidebar" class="sidebar">
      
<div class="widget">
  <div class="tag-cloud">
    <a class="title">
      標籤雲
    </a>
    
    <div class="content">
    
      <a href="/tags/BFS/" style="font-size: 11.25px;">BFS</a> <a href="/tags/BST/" style="font-size: 10px;">BST</a> <a href="/tags/C-C/" style="font-size: 10px;">C/C++</a> <a href="/tags/DFS/" style="font-size: 20px;">DFS</a> <a href="/tags/DP/" style="font-size: 16.25px;">DP</a> <a href="/tags/Dijkstra/" style="font-size: 11.25px;">Dijkstra</a> <a href="/tags/EPS/" style="font-size: 10px;">EPS</a> <a href="/tags/Hash/" style="font-size: 15px;">Hash</a> <a href="/tags/IO優化/" style="font-size: 18.75px;">IO優化</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/Mod/" style="font-size: 10px;">Mod</a> <a href="/tags/Tarjan/" style="font-size: 10px;">Tarjan</a> <a href="/tags/並查集/" style="font-size: 10px;">並查集</a> <a href="/tags/位元運算/" style="font-size: 17.5px;">位元運算</a> <a href="/tags/函式指標/" style="font-size: 10px;">函式指標</a> <a href="/tags/基數排序/" style="font-size: 13.75px;">基數排序</a> <a href="/tags/堆積排序/" style="font-size: 10px;">堆積排序</a> <a href="/tags/大數/" style="font-size: 12.5px;">大數</a> <a href="/tags/字串處理/" style="font-size: 20px;">字串處理</a> <a href="/tags/建表/" style="font-size: 15px;">建表</a> <a href="/tags/後序式/" style="font-size: 10px;">後序式</a> <a href="/tags/快速冪/" style="font-size: 10px;">快速冪</a> <a href="/tags/插入排序/" style="font-size: 10px;">插入排序</a> <a href="/tags/映射/" style="font-size: 12.5px;">映射</a> <a href="/tags/模板/" style="font-size: 15px;">模板</a> <a href="/tags/河內塔/" style="font-size: 15px;">河內塔</a> <a href="/tags/流程控制/" style="font-size: 13.75px;">流程控制</a> <a href="/tags/短路求值/" style="font-size: 10px;">短路求值</a> <a href="/tags/背包問題/" style="font-size: 12.5px;">背包問題</a> <a href="/tags/質數/" style="font-size: 12.5px;">質數</a>
    </div>
  </div>
</div>


<div class="widget">
  <div class="categories">
    <a class="title">
      分類目錄
    </a>
    
    <div class="content">
    
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/模板庫/">模板庫</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/線上解題/">線上解題</a><span class="category-list-count">251</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/線上解題/ZeroJudge/">ZeroJudge</a><span class="category-list-count">250</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/線上解題/本地測試模組/">本地測試模組</a><span class="category-list-count">1</span></li></ul></li></ul>
    </div>
  </div>
</div>


    </aside>
  </div>
  <footer id="footer">
  <div class="wrapper">
    <div class="copyright">
      &copy; 2019 Theme by <a href="https://github.com/naukri7707/hexo-theme-naukri">Naukri</a> -
      Powered by <a href="https://hexo.io/">Hexo</a>.
    </div>
  </div>
</footer>
  
</body>

</html>